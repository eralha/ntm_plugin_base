var services=angular.module("appServices",[]);services.factory("dataService",["$http","$q",function(a,b){return this.getData=function(a){var c=b.defer();return a.nonce=window.nonces[a.action],jQuery.post(ajaxurl,a,function(a){c.resolve(angular.fromJson(a))}),c.promise},this}]);var candidaturas=angular.module("appContactos",["appServices"]);candidaturas.directive("dirListaContactos",["$rootScope","$injector","$filter","$sce",function(a,b,c,d){return{restrict:"C",templateUrl:window.pluginsDir+"/templates/backend/dir_lista_contactos.php",compile:function(a,b){return function(a,b,c){}}}}]),candidaturas.controller("listaContactosController",["$scope","$rootScope","dataService",function(a,b,c){a.state="todos",a.$watch("state",function(b,c){a.contacts=[],"todos"==b&&a.getMessages(),"arquivo"==b&&a.getArquivo()}),a.setState=function(b){a.state=b},a.getMessages=function(){c.getData({action:"getContacts"}).then(function(b){a.contacts=b,a.currentPage=0})},a.getArquivo=function(){c.getData({action:"getArquivoContacts"}).then(function(b){a.contacts=b,a.currentPage=0})},a.deleteContact=function(b){for(var d=0;d<a.contacts.length;d++)a.contacts[d].iIDContacto==b&&(a.contacts[d].delleting=!0);c.getData({action:"deleteContact",msgId:b}).then(function(b){1==b&&"todos"==a.state&&a.getMessages(),1==b&&"arquivo"==a.state&&a.getArquivo()})},a.arquivarContact=function(b){for(var d=0;d<a.contacts.length;d++)a.contacts[d].iIDContacto==b&&(a.contacts[d].delleting=!0);c.getData({action:"arquivarContact",msgId:b}).then(function(b){1==b&&"todos"==a.state&&a.getMessages(),1==b&&"arquivo"==a.state&&a.getArquivo()})},a.restaurarContact=function(b){for(var d=0;d<a.contacts.length;d++)a.contacts[d].iIDContacto==b&&(a.contacts[d].delleting=!0);c.getData({action:"restaurarContact",msgId:b}).then(function(b){1==b&&(a.getMessages(),a.state="todos")})},a.getDate=function(a){var b=new Date(1e3*a);return b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear()+" - "+b.getHours()+":"+b.getMinutes()}}]);var directives=angular.module("appDirectives",[]);directives.directive("dirOpenPanel",["$rootScope","$injector","$filter","$sce",function(a,b,c,d){return{restrict:"A",compile:function(a,b){return function(a,b,c){var d=jQuery;d(b).click(function(){d(this).toggleClass("open")})}}}}]),directives.directive("dirListPager",["$rootScope","$injector","$compile","$filter",function(a,b,c,d){return{restrict:"EAC",compile:function(a,b){return function(a,b,c){var d=a,e=c.dirListPager;d.currentPage=0,d.pageSize=50;var f=d[e];d.$watch(function(){return d[e]},function(a){f=a.length}),console.log(d[e]),f=f.length||0,d.numberOfPages=function(){return Math.ceil(f/d.pageSize)},d.nextPage=function(){d.currentPage>=f/d.pageSize-1||(d.currentPage=d.currentPage+1,$("html, body").stop().animate({scrollTop:0},1e3,"swing"))},d.prevPage=function(){0!=d.currentPage&&(d.currentPage=d.currentPage-1,$("html, body").stop().animate({scrollTop:0},1e3,"swing"))}}}}}]);var settings=angular.module("appSettings",["appServices"]);settings.directive("dirListaSettings",["$rootScope","$injector","$filter","$sce",function(a,b,c,d){return{restrict:"C",templateUrl:window.pluginsDir+"/templates/backend/dir_lista_settings.php",compile:function(a,b){return function(a,b,c){}}}}]),settings.controller("listaSettingsController",["$scope","$rootScope","dataService",function(a,b,c){a.formData={},a.saveSettings=function(b){""!=a.formData.secret&&""!=a.formData.siteKey&&c.getData({action:"saveSettings",vchCaptchaSecret:a.formData.vchCaptchaSecret,vchCaptchaSiteKey:a.formData.vchCaptchaSiteKey,vchFromEmail:a.formData.vchFromEmail,vchFromName:a.formData.vchFromName,vchEmailGestao:a.formData.vchEmailGestao}).then(function(b){1==b&&(a.state="success"),(b=!1)&&(a.state="error")})},a.getSettings=function(b){c.getData({action:"getSettings"}).then(function(b){console.log(b),b.iID&&(a.formData=b)})},a.getSettings()}]);var app=angular.module("app",["appServices","appDirectives","appContactos","appSettings"]);app.filter("startFrom",function(){return function(a,b){return b=+b,a.slice(b)}}),angular.bootstrap(document,["app"]);